<?xml version="1.0" encoding="UTF-8"?>
<?eclipse version="3.4"?>
<plugin>
   <extension
         point="org.eclipse.ui.commands">
      <command
            categoryId="project"
            id="project.linkprojectdeliverable"
            name="链接项目交付物文档">
      </command>
   </extension>
   <extension
         point="org.eclipse.ui.handlers">
      <handler
            class="com.tmt.commons.rc.LinkProjectDeliverable"
            commandId="project.linkprojectdeliverable">
      </handler>
   </extension>
   <extension
         point="org.eclipse.ui.menus">
      <menuContribution
            allPopups="false"
            locationURI="popup:project.deliverable?after=project.linkdeliverable">
         <command
               commandId="project.linkprojectdeliverable"
               label="链接所负责项目的交付物"
               style="push">
            <visibleWhen
                  checkEnabled="false">
               <with
                     variable="selection">
                  <iterate
                        ifEmpty="false">
                     <and>
                        <instanceof
                              value="com.sg.business.model.Work">
                        </instanceof>
                        <test
                              args="createDeliverable"
                              property="runtimework.action">
                        </test>
                     </and>
                  </iterate>
               </with>
            </visibleWhen>
         </command>
      </menuContribution>
   </extension>
   <extension
         point="com.sg.widgets.navigator">
      <navigator
            id="allproject.deliverable.selector"
            tree="allproject.deliverable.selector">
         <filterAction>
            <column
                  columnDefinitionId="com.sg.widgets.column.desc">
            </column>
         </filterAction>
         <searchAction>
            <column
                  columnDefinitionId="com.sg.widgets.column.desc">
            </column>
         </searchAction>
      </navigator>
   </extension>
   <extension
         point="com.sg.widgets.tree">
      <tree
            autoExpandLevel="2"
            canCreate="false"
            canDelete="false"
            canEdit="false"
            canRead="false"
            dataSet="com.tmt.commons.rc.WorkOfAllProject"
            fix="1"
            id="allproject.deliverable.selector">
         <structure
               modelRelation="work_work">
         </structure>
         <structure
               modelRelation="work_deliverable">
         </structure>
         <column
               column="desc"
               labelProvider="com.sg.widgets.commons.labelprovider.PrimaryObjectLabelProvider"
               name="名称"
               style="SWT.LEFT"
               type="String"
               width="-1">
         </column>
      </tree>
   </extension>

</plugin>
