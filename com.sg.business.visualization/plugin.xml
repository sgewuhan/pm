<?xml version="1.0" encoding="UTF-8"?>
<?eclipse version="3.4"?>
<plugin>
   <extension
         point="org.eclipse.ui.views">
      <category
            id="visualization"
            name="可视化">
      </category>
      <view
            category="visualization"
            class="com.sg.business.visualization.view.OrganizationNavigator"
            id="vis.project.org"
            name="组织"
            restorable="true">
      </view>
      <view
            category="visualization"
            class="com.sg.business.visualization.view.ProjectTypeNavigator"
            id="vis.project.projecttype"
            name="类型"
            restorable="true">
      </view>
      <view
            category="visualization"
            class="com.sg.business.visualization.view.ProductTypeNavigator"
            id="vis.project.producttype"
            name="产品"
            restorable="true">
      </view>
      <view
            category="visualization"
            class="com.sg.business.visualization.view.MyProjectNavigator"
            id="vis.project.myprojectset"
            name="我的项目集"
            restorable="true">
      </view>
      <view
            category="visualization"
            class="com.sg.widgets.part.view.TreeNavigator"
            id="vis.project.projectmanager"
            name="负责人"
            restorable="true">
      </view>

   </extension>
   <extension
         point="com.sg.widgets.navigator">
      <navigator
            id="vis.project.org"
            tree="vis.project.org">
         <filterAction>
            <column
                  columnDefinitionId="com.sg.widgets.column.desc">
            </column>
            <column
                  columnDefinitionId="organization.description">
            </column>
         </filterAction>
         <searchAction>
            <column
                  columnDefinitionId="com.sg.widgets.column.desc">
            </column>
            <column
                  columnDefinitionId="organization.description">
            </column>
         </searchAction>
      </navigator>
      <navigator
            id="vis.projectset"
            provideSelection="true"
            table="vis.projectset">
         <filterAction>
            <column
                  columnDefinitionId="project.desc">
            </column>
            <column
                  columnDefinitionId="project.workorder">
            </column>
            <column
                  columnDefinitionId="planfinish">
            </column>
            <column
                  columnDefinitionId="project.launchorg_id">
            </column>
            <column
                  columnDefinitionId="chargerid">
            </column>
            <column
                  column="status"
                  id="project.status"
                  labelProvider="com.sg.business.commons.labelprovider.StatusLabelProvider"
                  name=" 状态"
                  toolTipText="状态"
                  type="String"
                  width="24">
            </column>
         </filterAction>
         <searchAction>
            <column
                  columnDefinitionId="project.desc">
            </column>
            <column
                  columnDefinitionId="project.workorder">
            </column>
            <column
                  columnDefinitionId="project.launchorg_id">
            </column>
            <column
                  columnDefinitionId="chargerid">
            </column>
         </searchAction>
      </navigator>
      <navigator
            id="vis.project.projecttype"
            table="vis.project.projecttype">
      </navigator>
      <navigator
            id="vis.project.producttype"
            table="vis.project.producttype">
      </navigator>
      <navigator
            id="vis.project.myprojectset"
            table="vis.project.myprojectset">
      </navigator>
      <navigator
            id="vis.project.projectmanager"
            tree="vis.project.projectmanager">
         <filterAction>
            <column
                  columnDefinitionId="com.sg.widgets.column.desc">
            </column>
            <column
                  columnDefinitionId="organization.description">
            </column>
         </filterAction>
         <searchAction>
            <column
                  columnDefinitionId="com.sg.widgets.column.desc">
            </column>
            <column
                  columnDefinitionId="organization.description">
            </column>
         </searchAction>
      </navigator>
   </extension>
   <extension
         point="com.sg.widgets.tree">
      <tree
            autoExpandLevel="2"
            canCreate="false"
            canDelete="false"
            canEdit="false"
            canRead="false"
            collectionName="organization"
            customItemHeight="40"
            dataSet="com.sg.business.model.dataset.organization.OrgOfOwnerManager"
            dbName="pm2"
            headerVisiable="false"
            id="vis.project.org"
            idfield="_id"
            lineVisiable="false"
            markupEnabled="true"
            multiSelection="false"
            virtual="true">
         <column
               column="desc"
               labelProvider="com.sg.business.visualization.labelprovide.OrganizationProjectLabelProvider"
               name="组织名称"
               style="SWT.LEFT"
               type="String"
               width="-1">
         </column>
         <structure
               modelRelation="organization_organization">
         </structure>
      </tree>
      <tree
            autoExpandLevel="2"
            canCreate="false"
            canDelete="false"
            canEdit="false"
            canRead="false"
            collectionName="organization"
            customItemHeight="40"
            dataSet="com.sg.business.model.dataset.organization.OrgOfOwnerManager"
            dbName="pm2"
            headerVisiable="false"
            id="vis.project.projectmanager"
            idfield="_id"
            lineVisiable="false"
            markupEnabled="true"
            multiSelection="false"
            virtual="true">
         <column
               column="desc"
               name="组织名称"
               style="SWT.LEFT"
               type="String"
               width="-1">
         </column>
         <structure
               modelRelation="organization_organization">
         </structure>
      </tree>
   </extension>
   <extension
         point="com.sg.widgets.table">
      <table
            canCreate="false"
            canDelete="true"
            canEdit="false"
            canRead="false"
            collectionName="project"
            dataSet="com.sg.business.model.dataset.visualization.VisProjectSet"
            dbName="pm2"
            headerVisiable="true"
            id="vis.projectset_2"
            lineVisiable="false"
            useHashlookup="true"
            virtual="true">
         <column
               columnDefinitionId="project.status">
         </column>
         <column
               columnDefinitionId="project.projectnumber">
         </column>
         <column
               columnDefinitionId="project.desc">
         </column>
         <column
               columnDefinitionId="chargerid">
         </column>
         <column
               columnDefinitionId="planstart">
         </column>
         <column
               columnDefinitionId="planfinish">
         </column>
         <column
               columnDefinitionId="actualstart">
         </column>
         <column
               columnDefinitionId="actualfinish">
         </column>
         <columnGroup
               defaultGroup="false"
               id="com.sg.business.project.columnGroup1"
               name="计划进度">
            <column
                  columnDefinitionId="planduration">
            </column>
            <column
                  columnDefinitionId="planworks">
            </column>
         </columnGroup>
         <columnGroup
               defaultGroup="false"
               id="com.sg.business.project.columnGroup1"
               name="实际进度">
            <column
                  columnDefinitionId="actualduration">
            </column>
            <column
                  columnDefinitionId="actualworks">
            </column>
         </columnGroup>
         <columnGroup
               defaultGroup="false"
               name="组织和参与者">
            <column
                  columnDefinitionId="participate">
            </column>
            <column
                  columnDefinitionId="project.org_id">
            </column>
            <column
                  columnDefinitionId="project.launchorg_id">
            </column>
         </columnGroup>
         <columnGroup
               defaultGroup="false"
               name="选项属性">
            <column
                  column="producttype"
                  name="产品类型">
            </column>
            <column
                  column="projecttype"
                  name="项目类型">
            </column>
            <column
                  column="standardset"
                  name="标准">
            </column>
         </columnGroup>
      </table>
      <table
            canCreate="false"
            canDelete="false"
            canEdit="false"
            canRead="false"
            collectionName="projecttype"
            customItemHeight="40"
            dataSet="com.sg.business.model.dataset.visualization.ProjectType"
            dbName="pm2"
            headerVisiable="false"
            id="vis.project.projecttype"
            markupEnabled="true"
            multiSelection="false"
            virtual="true">
         <column
               column="desc"
               labelProvider="com.sg.business.visualization.labelprovide.ProjectTypeLabelProvider"
               name="项目类型"
               type="String"
               width="-1">
         </column>
      </table>
      <table
            canCreate="false"
            canDelete="false"
            canEdit="false"
            canRead="false"
            collectionName="producttype"
            customItemHeight="40"
            dataSet="com.sg.business.model.dataset.visualization.ProductType"
            dbName="pm2"
            headerVisiable="false"
            id="vis.project.producttype"
            markupEnabled="true"
            multiSelection="false"
            virtual="true">
         <column
               column="desc"
               labelProvider="com.sg.business.visualization.labelprovide.ProductTypeLabelProvider"
               name="项目类型"
               type="String"
               width="-1">
         </column>
      
      </table>
      <table
            canCreate="false"
            canDelete="false"
            canEdit="false"
            canRead="false"
            collectionName="userprojectperf"
            customItemHeight="40"
            dataSet="com.sg.business.model.dataset.visualization.MyProjectSet"
            dbName="pm2"
            headerVisiable="false"
            id="vis.project.myprojectset"
            idfield="_id"
            markupEnabled="true"
            multiSelection="false"
            virtual="true">
         <column
               column="desc"
               labelProvider="com.sg.business.visualization.labelprovide.MyProjectSetLabelProvider"
               name="项目集名称"
               style="SWT.LEFT"
               type="String"
               width="-1">
         </column>
      </table>
      <table
            canCreate="false"
            canDelete="true"
            canEdit="false"
            canRead="false"
            collectionName="project"
            customItemHeight="60"
            dataSet="com.sg.business.model.dataset.visualization.VisProjectSet"
            dbName="pm2"
            fix="1"
            headerVisiable="true"
            id="vis.projectset"
            lineVisiable="false"
            markupEnabled="true"
            preload="20"
            useHashlookup="true"
            virtual="true">
         <column
               column="desc"
               labelProvider="com.sg.business.visualization.labelprovider.project.DescLabelProvider"
               lazyDisplay="true"
               name="项目名称描述"
               type="String"
               width="320">
         </column>
         <column
               column="planfinish"
               labelProvider="com.sg.business.visualization.labelprovider.project.SchedualLabelProvider"
               lazyDisplay="true"
               name="进度摘要"
               type="Date"
               width="200">
         </column>
      </table>
   </extension>
   <extension
         point="com.sg.widgets.dataEditor">
      <editor
            collectionName="projectprovider"
            dbName="pm2"
            id="editor.visualization.projectset"
            name="项目集">
         <navigatorpage
               id="projectset.info"
               navigatorId="vis.projectset"
               pageBodyPartCreater="com.sg.business.visualization.editor.ProjectSetContent"
               title="基本信息">
         </navigatorpage>
      </editor>
      <editor
            collectionName="userprojectperf"
            dbName="pm2"
            id="editor.visualization.addprojectset"
            name="添加至项目集">
         <basicpage
               id="项目集"
               title="项目集">
            <pagecolumn>
               <section
                     label="设定项目集">
                  <combo
                        editPart="Combo"
                        editable="true"
                        id="desc"
                        inputValidator="com.sg.business.visualization.validator.ProjectSetValidator"
                        label="项目集"
                        labelVisible="true"
                        name="desc"
                        optionProvider="com.sg.business.visualization.option.ProjectSetOption"
                        persistable="true"
                        required="false"
                        type="String">
                  </combo>
               </section>
            </pagecolumn>
         </basicpage>
      </editor>
   </extension>
   <extension
         point="org.eclipse.ui.menus">
      <menuContribution
            allPopups="false"
            locationURI="toolbar:main?before=create">
         <command
               commandId="visualization.command.demo1"
               icon="image/preview_24.png"
               label="演示"
               style="push">
         </command>
      </menuContribution>
      <menuContribution
            allPopups="false"
            locationURI="toolbar:main?after=common.separator">
         <command
               commandId="visualization.command.projectset"
               icon="image/preview_24.png"
               label="添加至项目集"
               style="toggle"
               tooltip="显示预览视图">
            <visibleWhen
                  checkEnabled="false">
               <with
                     variable="activeWorkbenchWindow.activePerspective">
                  <equals
                        value="perspective.visualization">
                  </equals>
                  <with
                        variable="selection">
                     <iterate
                           ifEmpty="false">
                        <test
                              args="add"
                              property="vis.projectaction.add">
                        </test>
                     </iterate>
                  </with>
               </with>
            </visibleWhen>
         </command>
      </menuContribution>
   </extension>
   <extension
         point="org.eclipse.ui.commands">
      <command
            id="visualization.command.demo1"
            name="demo">
      </command>
      <command
            id="visualization.command.projectset"
            name="添加至项目集">
      </command>
   </extension>
   <extension
         point="org.eclipse.ui.handlers">
      <handler
            class="com.sg.business.visualization.Demo1"
            commandId="visualization.command.demo1">
      </handler>
      <handler
            class="com.sg.business.visualization.view.handler.ProjectSetAdd"
            commandId="visualization.command.projectset">
      </handler>
   </extension>
   <extension
         point="org.eclipse.core.expressions.propertyTesters">
      <propertyTester
            class="com.sg.business.visualization.view.propertytest.VisProjectActionTest"
            id="vis.projectaction"
            namespace="vis.projectaction"
            properties="add"
            type="java.lang.Object">
      </propertyTester>
   </extension>

</plugin>
